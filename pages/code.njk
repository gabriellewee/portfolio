---js
{
    layout: "layouts/base.njk",
	title: "Code",
	description: "Code snippets and ideas",
	permalink: "/code/",
	key: "code",
	og: true,
	message: true,
	isotope: true,
	eleventyComputed: {
		media(data) {
			return data[data.key];
		}
	},
	tags: "pages"
}
---

<section class="posts-container">
	<div class="posts grid-isotope">
		{% for post in collections.code | reverse %}
			<article class="post post-code {% if post.data.size %} post-size-{{post.data.size}}{% endif %} grid-item"{% if post.data.width %} style="max-width: {{post.data.width}}"{% endif %}>
				<div class="post-inner">
					<header class="post-header{% if (post.data.category == 'writing') or (post.data.category == 'code') %} inline-header{% endif %}">
						<div class="post-header-content">
							<div class="post-header-left">
								<h2 class="post-headline">
									{% if post.data.uri %}
										<a href="https://codepen.io/gabriellewee/pen/{{post.data.uri}}" target="_blank"><span>{{post.data.title|safe}}</span></a>
									{% else %}
										{{post.data.title|safe}}
									{% endif %}
								</h2>
								{% if post.data.type %}
									<ul class="post-tags">
										{% for type in post.data.type %}
											<li><span class="tag-{{type}}">#{{type}}</span></li>
										{% endfor %}
									</ul>
								{% endif %}
							</div>
							<div class="post-header-right">
								<time class="time{% if post.data.category != 'code' %} time-default{% endif %}{% if post.data.category == 'social' %} time-external{% endif %}" datetime="{{post.page.date|ISO|htmlDateString}}" data-time="{{post.page.date|ISO}}">{{post.page.date|ISO|readableDate}}</time>
								<a class="expand" id="{{post.page.date|ISO|htmlDateString}}-{{post.page.fileSlug}}" href="#{{post.page.date|ISO|htmlDateString}}-{{post.page.fileSlug}}-lightbox" aria-label="Expand {{post.data.type}}" role="button"></a>
								<a class="external-expand" href="{{post.url|url}}" aria-label="View {{post.data.type}} in new window" target="_blank"></a>
							</div>
						</div>
					</header>
					<div class="post-content{% if post.data.category == 'writing' %} post-text{% endif %}"{% if post.data.background %} style="background: {{post.data.background}}"{% endif %}>
						{% if post.data.mobile == false %}
							<a class="post-mobile-button button" href="{{post.url|url}}" target="_blank"><span><span>View animation</span></span></a>
						{% endif %}
						{% if post.data.button %}
							<button class="reload button"><span><span>{{post.data.button|capitalize}}</span></span></button>
						{% endif %}
						{% if post.url %}
							{% if post.data.mobile == false %}
								<div class="post-mobile">
									<picture>
										<img src="/static/code/images/{{post.page.fileSlug}}/thumbnail.svg" alt="{{post.description}}" width="{% stats './static/code/images/' + post.page.fileSlug + '/thumbnail.svg', 'width' %}" height="{% stats './static/code/images/' + post.page.fileSlug + '/thumbnail.svg', 'height' %}"/>
									</picture>
								</div>
							{% endif %}
							<iframe class="code{% for type in post.data.type %} {{type}}{% endfor %}" src="{{post.url|url}}" width="600" height="{{post.data.height}}" title="{{post.data.title|safe}}" loading="lazy" tabindex="-1" onload="this.style.opacity = 1;"></iframe>
							<noscript class="warning{% for type in post.data.type %} {{type}}{% endfor %}">Please enable Javascript to view this code demo.</noscript>
						{% else %}
							{{post.content|safe}}
						{% endif %}
					</div>
				</div>
			</article>
		{% endfor %}
	</div>

	{% include 'pages/posts/author.html' %}
</section>

<div class="lightbox-group" hidden>
	{% for post in collections.code | reverse %}
		<a class="lightbox" role="dialog" aria-label="Modal" aria-modal="true" id="{{post.page.date|ISO|htmlDateString}}-{{post.page.fileSlug}}-lightbox" href="#{{post.page.date|ISO|htmlDateString}}-{{post.page.fileSlug}}"></a>
		<div class="iframe" data-content="true">
			{% if post.url %}
				<iframe class="code{% for type in post.data.type %} {{type}}{% endfor %}" src="{{post.url|url}}" width="600" height="{{post.data.height}}" title="{{post.data.title|safe}}" loading="lazy" tabindex="-1" onload="this.style.opacity = 1;"></iframe>
				<noscript class="warning{% for type in post.data.type %} {{type}}{% endfor %}">Please enable Javascript to view this code demo.</noscript>
			{% else %}
				{{post.content|safe}}
			{% endif %}
		</div>
	{% endfor %}
	<div class="lightbox-background"></div>
</div>
