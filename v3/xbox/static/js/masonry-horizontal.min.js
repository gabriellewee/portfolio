!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["get-size/get-size","isotope/js/layout-mode","fizzy-ui-utils/utils"],b):"object"==typeof exports?module.exports=b(require("get-size"),require("isotope-layout/js/layout-mode"),require("fizzy-ui-utils")):b(a.getSize,a.Isotope.LayoutMode,a.fizzyUIUtils)}(window,function(b,c,d){"use strict";var e=c.create("masonryHorizontal");return e.prototype._resetLayout=function(){this.getRowHeight(),this._getMeasurement("gutter","outerHeight"),this.rowHeight+=this.gutter,this.rows=Math.floor((this.isotope.size.innerHeight+this.gutter)/this.rowHeight),this.rows=Math.max(this.rows,1);var a=this.rows;for(this.rowXs=[];a--;)this.rowXs.push(0);this.maxX=0},e.prototype._getItemLayoutPosition=function(a){a.getSize();var b=Math.ceil(a.size.outerHeight/this.rowHeight);b=Math.min(b,this.rows);for(var c=this._getRowGroup(b),e=Math.min.apply(Math,c),f=d.indexOf(c,e),g={x:e,y:this.rowHeight*f},h=e+a.size.outerWidth,i=this.rows+1-c.length,j=0;j<i;j++)this.rowXs[f+j]=h;return g},e.prototype._getRowGroup=function(a){if(a<2)return this.rowXs;for(var b=[],c=this.rows+1-a,d=0;d<c;d++){var e=this.rowXs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},e.prototype._manageStamp=function(a){var c=b(a),d=this.isotope._getElementOffset(a),e=this.isotope.options.isOriginTop?d.top:d.bottom,f=e+c.outerHeight,g=Math.floor(e/this.rowHeight);g=Math.max(0,g);var h=Math.floor(f/this.rowHeight);h=Math.min(this.rows-1,h);for(var i=(this.isotope.options.isOriginLeft?d.left:d.right)+c.outerWidth,j=g;j<=h;j++)this.rowXs[j]=Math.max(i,this.rowXs[j])},e.prototype._getContainerSize=function(){return this.maxX=Math.max.apply(Math,this.rowXs),{width:this.maxX}},e.prototype.needsResizeLayout=function(){return this.needsVerticalResizeLayout()},e});
