@import 'popup';
@import 'lightbox';
@import 'memoji';
@import 'button';
@import 'colors';

.title {
	opacity: 0;
	font-size: clamp(1.5rem, 3vw, 2.5rem);
	.apple {
		display: inline-block;
		span {
			&:before {
				content: " ";
			}
		}
		svg {
			position: relative;
			top: 2px;
			width: clamp(1.3rem, 3vw, 2.3rem);
			height: clamp(1.3rem, 3vw, 2.3rem);
		}
	}
}

.cursor {
	opacity: 0;
	@media (prefers-reduced-motion) {
		display: none;
	}
	&:after {
		content: "_";
		display: inline-block;
	}
	&.animated {
		&:after {
			animation: blink 1s cubic-bezier(1,0,0,1) infinite forwards;
		}
	}
}
@keyframes blink {
	from { opacity: 1 } to { opacity: 0 }
}

.clip-container {
	display: inline-flex;
	align-items: center;
	position: relative;
	&:before, &:after {
		opacity: 0;
		visibility: hidden;
		display: block;
		transition: .1s ease-out;
		background-color: var(--color-iron);
	}
	&:before {
		content: "";
		position: absolute;
		top: calc(50% - 5px);
		left: 100%;
		translate: calc(var(--p)/2) 0;
		width: 10px;
		height: 10px;
		border-bottom-left-radius: 2px;
		rotate: 45deg;
	}
	&:after {
		@include font-weight-width(600, 100);
		content: "Copied";
		color: white;
		position: absolute;
		left: 100%;
		translate: calc(var(--p)/2 + 4px) 0;
		padding: 6px 8px;
		border-radius: 2px;
		font-size: .75rem;
		text-transform: uppercase;
	}
	&.copied {
		&:before, &:after {
			opacity: 1;
			visibility: visible;
		}
	}
}

.contact {
	position: relative;
	z-index: 10;
	max-width: var(--width);
	margin-left: auto;
	margin-right: auto;
	padding-left: calc((var(--p)*2) + env(safe-area-inset-left));
	padding-right: calc((var(--p)*2) + env(safe-area-inset-right));
	.contact-sites, .contact-messages {
		@include font-weight-width(900, 125);
		font-size: clamp(1.5rem, 3vw, 2rem);
		line-height: 1.2;
		@include viewport($ipad-mini) {
			line-height: 1.1;
		}

		> h2 {
			margin-top: 1.5rem;
		}

		> ul {
			margin-top: .5rem;
			list-style: none;
			.link {
				display: inline-block;
			}
			.link > a {
				&:not(.clip-container) {
					display: inline-block;
				}
				&:not(:last-child) {
					margin-right: .75rem;
				}
				&:last-of-type {
					margin-right: .75rem;
				}
			}
			.link > a, .popup-label, .popup-label span {
				transition: .1s ease-out;
				font-size: clamp(1.75rem, 3vw, 2rem);
				line-height: 1.3;
				@include viewport($ipad-mini) {
					line-height: 1.1;
				}
			}
			.link > a, .popup-label span {
				text-decoration: underline;
				text-decoration-thickness: 3px;
				text-underline-offset: 8px;
			}
			.link > a {
				&:not(:hover):not(:focus) {
					text-decoration-color: hsla(var(--color-blush-8-hsl), 0);
				}
			}
			.popup-label {
				color: var(--color-discord);
				span {
					text-decoration-color: hsla(var(--color-blush-8-hsl), 0);
				}
			}
			.popup-label:hover span, .popup-button:focus + .popup-label span {
				text-decoration-color: var(--color-discord);
			}
			.link > a:hover, .link > a:focus, .popup-label:hover span, .popup-button:focus ~ .popup-label span {
				color: var(--color-iron);
			}
			.link > a:hover, .link > a:focus, .popup-label:hover span, .popup-button:focus ~ .popup-label span, .link > a:active, .popup-button:active ~ .popup-label span {
				text-underline-offset: 4px;
			}
			.link > a:active, .popup-button:not(:checked):active ~ .popup-label span {
				@media (prefers-reduced-motion: no-preference) {
					scale: .95;
				}
			}
		}
	}
	.posts-container & {
		position: relative;
		padding: calc(var(--p)*2);
		margin-top: calc(var(--p)*2);
		opacity: 0;
		&:before {
			@include clip-path-edges(2px);
			content: "";
			display: block;
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: white;
		}
		@include viewport(mobile) {
			display: grid;
			grid-gap: calc(var(--p)*2);
			grid-template-columns: 1fr 1fr;
		}
		.contact-sites, .contact-messages {
			@include font-weight-width(800, 120);
			position: relative;
			z-index: 1;
			margin-top: 0;
			font-size: 1.25rem;
			@include viewport($ipad-mini) {
				line-height: 1.2;
			}
			> h2 {
				margin-top: 0;
			}
			> ul {
				margin-top: .25rem;
				.link > a, .popup-label, .popup-label span {
					font-size: 1.25rem;
					line-height: 1.2;
					@include viewport($ipad-mini) {
						line-height: 1.2;
					}
				}
				.link > a {
					text-decoration-thickness: 2px;
					text-underline-offset: 6px;
					&:hover, &:focus {
						text-underline-offset: 3px;
					}
					&:not(:hover):not(:focus) {
						text-decoration-color: hsla(var(--color-white-hsl), 0);
					}
				}
			}
		}
		.contact-messages {
			margin-top: 1rem;
			@include viewport(mobile) {
				margin-top: 0;
			}
		}
	}
	.clip-container {
		&:before {
			left: 50%;
			top: 100%;
			translate: -50% calc(var(--p)/3);
			border-top-left-radius: 2px;
			border-bottom-left-radius: unset;
		}
		&:after {
			left: 50%;
			top: 100%;
			translate: -50% calc(var(--p)/3 + 4px);
		}
		&:after {
			content: "Username copied"
		}
	}
}