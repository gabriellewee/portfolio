.mentions {
	display: flex;
	flex-direction: column;
	@supports (container-type: inline-size) {
		container-type: inline-size;
		container-name: mentions;
	}
	> .button {
		&:not(:only-child) {
			display: none;
		}
		&:only-child {
			align-self: flex-start;
			margin-top: calc(var(--p)*2);
		}
	}
	> .mentions-header, .mentions-header-wrapper, .mentions-like-content, .mentions-repost-content {
		padding-left: calc((var(--p)*2) + env(safe-area-inset-left));
		padding-right: calc((var(--p)*2) + env(safe-area-inset-right));
		@include viewport($iphone-max) {
			padding-left: 0;
			padding-right: 0;
		}
	}
	.mentions-like-content + .button,
	.mentions-repost-content + .button {
		display: block;
		align-self: flex-start;
		margin-top: calc(var(--p)*2);
	}
	.mentions-header {
		@include font-weight-width(800, 120);
		font-size: 2rem;
		margin-top: calc(var(--p)*2.5);
		margin-bottom: calc(var(--p)*1.5);
		grid-column: 1/-1;
		@include viewport(mobile) {
			font-size: 2.25rem;
		}
	}
	.mentions-header-wrapper {
		grid-column: 1/-1;
		margin-top: calc(var(--p)*2.5);
		margin-bottom: calc(var(--p)*1.5);
		@include container(mentions, mobile, 480px) {
			display: flex;
			justify-content: space-between;
			align-items: center;
			align-content: center;
		}
		.mentions-header {
			grid-column: unset;
			margin-top: 0;
			margin-bottom: 0;
		}
		.button {
			display: inline-block;
			margin-top: calc(var(--p)*1.75);
			margin-bottom: calc(var(--p)/2);
			@include container(mentions, mobile, 480px) {
				margin-top: 0;
				margin-bottom: 0;
			}
		}
	}
	.mentions-reply-content + .mentions-reply-header-wrapper {
		display: none;
		+ .mentions-reply-content {
			margin-top: calc(var(--p)*2);
		}
	}
	.mentions-content {
		list-style: none;
	}
	.mentions-like-content, .mentions-repost-content {
		display: grid;
		grid-gap: var(--p);
		grid-template-columns: repeat(auto-fill, minmax(48px, 1fr));
	}
	.mentions-reply-content, .mentions-link-content {
		li {
			padding: calc(var(--p)*2);
			@include theme(light, 2) {
				background-color: gHSL(secondary, 1, .75);
			}
			@include theme(dark, 2) {
				background-color: gHSL(iron, .55, .65);
			}
			@include viewport($iphone-max) {
				@include clip-path-edges(2px);
			}
			@include viewport(mobile) {
				display: flex;
				align-items: flex-start;
			}
			@include viewport($iphone-max) {
				@include contrast(both, 2) {
					position: relative;
					clip-path: unset;
					border-radius: unset;
					background-color: unset;
					&:before, &:after {
						content: "";
						display: block;
						position: absolute;
					}
					&:before {
						@include clip-path-edges(3px);
						z-index: -2;
						top: -1.5px;
						left: -1.5px;
						width: calc(100% + 3px);
						height: calc(100% + 3px);
						background-color: var(--color-primary);
					}
					&:after {
						@include clip-path-edges(2px);
						z-index: -1;
						top: 0;
						left: 0;
						width: 100%;
						height: 100%;
					}
				}
			}
			&:after {
				@include contrast(light, 2) {
					background-color: white;
				}
				@include contrast(dark, 2) {
					background-color: gHSL(iron, .7);
				}
			}
			&:not(:first-child) {
				margin-top: calc(var(--p)*2);
			}
			> div {
				&:not(:first-child) {
					.username, .time {
						margin-top: var(--p);
					}
					@include viewport(mobile) {
						margin-left: calc(var(--p)*2);
						.username, .time {
							margin-top: 0;
						}
					}
				}
				&.post-link {
					a {
						font-weight: 600;
					}
				}
			}
		}
	}
	.username, .time, .avatar {
		transition: scale .2s ease-out;
		display: inline-block;
		position: relative;
		&:focus-visible {
			&:before {
				opacity: 1;
			}
		}
	}
	.avatar {
		&:before {
			@include before;
			background: radial-gradient(
				circle at center left,
				var(--color-blush),
				var(--color-rose)
			);
		}
		&:hover {
			@media (prefers-reduced-motion: no-preference) {
				scale: 1.05;
			}
		}
		&:active {
			@media (prefers-reduced-motion: no-preference) {
				scale: .95;
			}
		}
		picture {
			@include clip-path-edges(2px);
			width: 48px;
			height: 48px;
		}
	}
	.username, .time {
		@include font-weight-width(600, 90);
		z-index: 1;
		color: white;
		font-size: .875rem;
		&:before {
			@include before;
			@include theme(light, 2) {
				background-color: gHSL(mauve, 1, .5);
			}
			@include theme(dark, 2) {
				background-color: var(--color-blush);
			}
			@include contrast(both, 2) {
				@include mix(
					color-mix(
						in srgb,
						var(--color-iron) 60%,
						var(--color-slate)
					),
					mix($iron, $slate, 60%)
				);
				background-color: var(--color-mix);
			}
		}
		&:after {
			@include contrast(both, 2) {
				@include clip-path-edges(3px);
				content: "";
				display: block;
				position: absolute;
				z-index: -1;
				top: -1.5px;
				left: -1.5px;
				width: calc(100% + 3px);
				height: calc(100% + 3px);
				background-color: var(--color-primary);
			}
		}
		&:focus-visible {
			&:before {
				opacity: 1;
			}
		}
		&:active {
			@media (prefers-reduced-motion: no-preference) {
				scale: .95;
			}
		}
		> * {
			@include clip-path-edges(2px);
			transition: background-color .2s ease-out;
			display: inline-block;
			padding: calc(var(--p)/3*2) var(--p);
		}
	}
	.username {
		margin-right: var(--p);
		span {
			background-color: var(--color-mauve);
		}
		&:hover, &:focus {
			span {
				background-color: var(--color-slate);
			}
		}
		&:active {
			span {
				background-color: var(--color-iron);
			}
		}
	}
	.time {
		time {
			@include mix(
				color-mix(
					in srgb,
					var(--color-iron) 70%,
					white
				),
				mix($iron, white, 70%)
			);
			background-color: var(--color-mix);
		}
		&:hover, &:focus {
			time {
				background-color: var(--color-slate);
			}
		}
		&:active {
			time {
				@include mix(
					color-mix(
						in srgb,
						var(--color-iron) 90%,
						white
					),
					mix($iron, white, 90%)
				);
				background-color: var(--color-mix);
			}
		}
	}
	.reply {
		font-size: 1.125rem;
		line-height: 1.334;
		margin-top: var(--p);
		@include viewport(mobile) {
			margin-top: calc(var(--p)/2);
		}
	}
	.mentions-placeholder {
		display: none;
		&:empty {
			~ h3, ~ ul {
				display: none;
			}
		}
	}
}

.post-author {
	display: none;
}